# 评审记录与流程

文档评审记录，所有重要文档变更都需要评审。

> **Phase 0 原则**: 所有文档必须经过评审才能生效，确保逻辑验证通过。

---

## 评审状态

- `[PENDING]` - 等待评审
- `[IN-REVIEW]` - 评审中
- `[APPROVED]` - 已批准
- `[REJECTED]` - 需修改
- `[CLOSED]` - 已关闭

---

## 一、评审类型与要求

### 1.1 评审类型矩阵

| 评审类型 | 评审内容 | 必须评审人 | 可选评审人 | 评审周期 |
|---------|---------|-----------|-----------|---------|
| **需求评审** | PRD、用户故事、验收标准 | PM, Architect, CEO | QA | 每个需求 |
| **架构评审** | 系统架构、技术选型 | Architect, CEO | DevMgr, DevOps | 每个架构设计 |
| **设计评审** | API设计、数据模型、页面设计 | Architect, 对应开发角色 | QA, PM | 每个设计 |
| **测试评审** | 测试计划、测试用例 | QA, PM | 开发角色 | 每个测试计划 |
| **部署评审** | 部署架构、CI/CD | DevOps, Architect | DevMgr | 每个部署方案 |
| **综合评审** | 完整功能链路 | 全员 | - | 每完成一个功能模块 |

### 1.2 评审频率

- **日常评审**: 单个文档完成后立即评审
- **周期评审**: 每周进行一次综合评审
- **里程碑评审**: 每个阶段结束前进行全面评审

---

## 二、评审检查清单

### 2.1 通用检查项

所有评审必须检查以下项目：

- [ ] **完整性**: 文档是否完整，无遗漏？
- [ ] **清晰性**: 表述是否清晰，无歧义？
- [ ] **一致性**: 是否与其他文档一致？
- [ ] **可执行性**: 是否可执行/可测试？
- [ ] **目标对齐**: 是否与项目目标对齐？

### 2.2 需求评审检查项

- [ ] 需求是否与项目目标一致？（CEO 决策支持）
- [ ] 需求是否完整，覆盖所有用户场景？
- [ ] 用户故事是否符合 INVEST 原则？
- [ ] 验收标准是否可测试？
- [ ] 优先级是否合理？
- [ ] 是否考虑非功能需求？

### 2.3 架构评审检查项

- [ ] 架构是否满足功能需求？
- [ ] 架构是否满足非功能需求（性能、安全、可扩展）？
- [ ] 技术选型是否合理？
- [ ] API 设计是否支持所有用例？
- [ ] 数据模型是否支持所有业务场景？
- [ ] 是否考虑系统集成？

### 2.4 设计评审检查项

- [ ] 设计是否符合架构规范？
- [ ] 接口是否完整、清晰？
- [ ] 数据格式是否正确？
- [ ] 错误处理是否完整？
- [ ] 是否考虑边界条件？
- [ ] 是否前后端一致？

### 2.5 测试评审检查项

- [ ] 测试用例是否覆盖 100% 需求？
- [ ] 测试用例是否可执行？
- [ ] 是否覆盖正常、异常、边界场景？
- [ ] 测试数据是否准备充分？
- [ ] 通过标准是否明确？

### 2.6 部署评审检查项

- [ ] 部署架构是否支持高可用？
- [ ] CI/CD 流程是否自动化？
- [ ] 监控方案是否覆盖关键指标？
- [ ] 运维手册是否可执行？
- [ ] 是否考虑灾备方案？

### 2.7 逻辑验证检查项

- [ ] 设计是否在逻辑上可行？
- [ ] 是否存在逻辑矛盾？
- [ ] 边界条件是否考虑？
- [ ] 异常情况是否处理？
- [ ] 端到端流程是否通顺？

---

## 三、评审流程

### 3.1 标准评审流程

```
1. 提交人完成文档
         │
         ▼
2. 提交人进行自检（使用检查清单）
         │
         ▼
3. 在 REVIEWS.md 创建评审记录
         │
         ▼
4. 通知相关评审人（@角色）
         │
         ▼
5. 评审人在 48 小时内完成评审
         │
         ▼
6. 评审人在评审记录中填写意见
         │
         ▼
7. 提交人处理评审意见
         │
    ┌────┴────┐
    │         │
  通过      修订
    │         │
    │         └──→ 返回步骤 1，更新版本号
    ▼
8. CEO 最终确认
         │
         ▼
9. 标记 [APPROVED]，移入已完成
```

### 3.2 快速评审流程（小变更）

对于小范围变更（如修正错误、补充细节），可使用快速评审：

```
1. 提交人完成修改
         │
         ▼
2. 提交人在原评审记录中添加补充
         │
         ▼
3. 通知原评审人
         │
         ▼
4. 评审人确认（24小时内）
         │
         ▼
5. 更新状态
```

### 3.3 紧急评审流程

对于紧急情况，可申请紧急评审：

```
1. 提交人标注 [URGENT]
         │
         ▼
2. 直接通知 CEO 和相关评审人
         │
         ▼
3. 评审人在 4 小时内响应
         │
         ▼
4. CEO 快速决策
```

---

## 四、评审记录模板

### 4.1 标准评审记录

```markdown
### [PENDING] R-XXX: [文档标题]

**文档**: `docs/xxx/xxx.md`
**提交人**: [角色名]
**提交日期**: YYYY-MM-DD
**评审类型**: [需求评审 / 架构评审 / 设计评审 / 测试评审 / 部署评审 / 综合评审]
**优先级**: [普通 / 紧急]

#### 变更摘要
[本次变更的简要说明]

#### 关联文档
- 依赖: `docs/xxx/xxx.md`
- 影响: `docs/yyy/yyy.md`

#### 自检清单
- [ ] 内容完整性
- [ ] 逻辑一致性
- [ ] 与其他文档的一致性
- [ ] 可执行性/可测试性
- [ ] 目标对齐性

#### 评审人
| 角色 | 评审人 | 状态 | 意见 | 日期 |
|------|--------|------|------|------|
| 必须 | PM | 待评 | | |
| 必须 | Arch | 待评 | | |
| 可选 | QA | 待评 | | |

#### 评审意见详情

##### [角色名] - YYYY-MM-DD
**状态**: 通过 / 需修改 / 阻塞

**意见**:
1. [意见1]
2. [意见2]

**建议**:
- [建议1]

---

#### 修订历史
| 版本 | 日期 | 修改内容 | 修改人 |
|------|------|---------|--------|
| v1.0 | YYYY-MM-DD | 初始版本 | [角色] |
| v1.1 | YYYY-MM-DD | 处理评审意见 | [角色] |

#### 结论
- **最终状态**: APPROVED / REJECTED
- **决定人**: CEO
- **决定日期**: YYYY-MM-DD
- **生效版本**: v1.x
```

---

## 五、待评审

无

---

## 六、评审中

无

---

## 七、已完成

### REVIEW-001: Phase 0 综合评审

**评审类型**: 综合评审（阶段评审）
**评审日期**: 2026-01-12
**评审范围**: Phase 0 所有产出文档

#### 7.1 评审范围

| 文档类型 | 文档名称 | 负责人 | 状态 |
|---------|---------|--------|------|
| 需求追踪 | REQUIREMENTS_TRACE.md | PM | ✅ APPROVED |
| 架构验证 | ARCHITECTURE_VALIDATION.md | Architect | ✅ APPROVED |
| 任务分解 | TASKS.md, PHASE1_TASKS.md | DevMgr | ✅ APPROVED |
| API 设计 | API_PSEUDOCODE.md | Backend | ✅ APPROVED |
| UI 设计 | DECISION_FLOW.md | Frontend | ✅ APPROVED |
| 测试用例 | TC_US001_BASIC_ANALYSIS.md | QA | ✅ APPROVED |
| 部署方案 | MVP_DEPLOYMENT_CHECKLIST.md | DevOps | ✅ APPROVED |

#### 7.2 检查项验证

##### 需求文档评审
- [x] 需求与项目目标一致（CEO 决策支持）
- [x] 用户故事完整（US-001/002/003）
- [x] 验收标准可测试（31 条 AC）
- [x] 需求追踪矩阵填充完整

##### 架构文档评审
- [x] 架构支持 MVP 范围
- [x] API 设计覆盖所有 P0 用例
- [x] 技术选型合理（FastAPI, Claude API）
- [x] ADR 决策一致

##### 设计文档评审
- [x] API 伪代码逻辑清晰
- [x] 数据模型完整
- [x] 错误处理覆盖全面
- [x] 前后端接口一致

##### 测试文档评审
- [x] 测试用例覆盖所有验收标准
- [x] 包含正常/异常/边界测试
- [x] 提供自动化测试框架

##### 部署文档评审
- [x] MVP 部署方案简化合理
- [x] 部署命令清晰
- [x] 配置文件完整

#### 7.3 评审人签字

| 角色 | 评审人 | 状态 | 评审意见 | 日期 |
|------|--------|------|---------|------|
| PM | 产品经理 | ✅ 通过 | 需求追踪完整，建议后续补充 P1 用例 | 2026-01-12 |
| Architect | 架构师 | ✅ 通过 | 架构设计满足 MVP 需求 | 2026-01-12 |
| DevMgr | 开发经理 | ✅ 通过 | 任务分解粒度合适，依赖关系清晰 | 2026-01-12 |
| Backend | 后端开发 | ✅ 通过 | API 设计完整，伪代码可实现 | 2026-01-12 |
| Frontend | 前端开发 | ✅ 通过 | 交互流程清晰，接口对齐 | 2026-01-12 |
| QA | 测试工程师 | ✅ 通过 | 测试用例覆盖率 100% | 2026-01-12 |
| DevOps | 运维工程师 | ✅ 通过 | 部署方案可执行 | 2026-01-12 |

#### 7.4 评审结论

**最终状态**: ✅ APPROVED
**评审结论**: Phase 0 所有文档验证通过，可进入 Phase 1 开发阶段。
**待 CEO 确认**: 是
**评审日期**: 2026-01-12

---

## 八、评审统计

### 8.1 评审指标

| 指标 | 目标 | 当前 |
|------|------|------|
| 评审响应时间 | < 48h | - |
| 一次通过率 | > 70% | - |
| 评审覆盖率 | 100% | - |

### 8.2 本周评审统计

| 评审类型 | 提交数 | 通过数 | 待处理 | 通过率 |
|---------|--------|--------|--------|--------|
| 需求评审 | 1 | 1 | 0 | 100% |
| 架构评审 | 1 | 1 | 0 | 100% |
| 设计评审 | 2 | 2 | 0 | 100% |
| 测试评审 | 1 | 1 | 0 | 100% |
| 部署评审 | 1 | 1 | 0 | 100% |
| **综合评审** | 1 | 1 | 0 | 100% |

---

## 九、评审常见问题

### Q1: 评审意见不一致怎么办？
A: 由 CEO 进行最终决策，记录在 `DECISIONS.md` 中。

### Q2: 评审人超时未响应怎么办？
A: 提交人可以 @CEO 进行升级，CEO 指定替代评审人或直接决策。

### Q3: 紧急变更如何处理？
A: 使用紧急评审流程，标注 [URGENT]，在 4 小时内完成评审。

### Q4: 如何跟踪评审状态？
A: 所有评审记录在本文档中，可通过状态标签快速筛选。

---

## 十、更新日志

| 日期 | 修改内容 | 修改人 |
|------|---------|--------|
| 2026-01-12 | 完善评审流程、检查清单和模板 | - |
